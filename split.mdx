---
title: "Split"
description: "Classify pages and break apart multi-page files using natural-language queries."
---

### TL;DR

Send an array of descriptions for what you want (e.g., “invoices”, “contracts”, "account number xyz"). Cardinal returns which pages match each description.

---

### Endpoint

**POST** `https://api.trycardinal.ai/split`  
**Content-Type:** `multipart/form-data`  
**Auth:** `X-API-KEY: <API_KEY>`

> You may provide **either** `file` **or** `fileUrl`.

---

### Required parameters

- **`queries`** *(string)* — JSON-encoded array of query objects (see format below)  
- **`file`** *(file upload)* **OR** **`fileUrl`** *(string)*

### Query object format

Each query is:
- **`name`** *(string)* — label you'll see in the response (e.g., `"invoices"`)
- **`description`** *(string)* — natural-language hint used to find relevant pages
- **`exclude_matchers`** *(array, optional)* — rules to prevent classification when pages match other categories
- **`priority`** *(number, optional)* — higher numbers take precedence when exclusion rules create conflicts (default: 0)

**Example `queries` value**
```json
[
  {"name":"invoices","description":"Pages with invoice numbers, totals due, remittance sections"},
  {"name":"contracts","description":"Legal agreements with parties, terms, signatures"},
  {"name":"financial_statements","description":"Balance sheets, income statements, cash flow tables"}
]
```

### Exclusion Rules

Use `exclude_matchers` to handle pages that could match multiple categories:

- **`["*"]`** — Don't classify if the page matches ANY other category (catch-all behavior)
- **`["*", "!categoryName"]`** — Don't classify if page matches any other category EXCEPT the specified one
- **`["category1", "category2"]`** — Don't classify if the page also matches these specific categories

**Example use case:**
```json
[
  {"name":"medical_records","description":"Patient charts, lab results, clinical notes"},
  {"name":"billing","description":"Insurance claims, payment records, billing codes"},
  {
    "name":"other",
    "description":"Any other healthcare documents",
    "exclude_matchers":["*"]
  }
]
```

### Priority Rules

Use `priority` to control which category wins when pages match multiple conflicting categories:

- **`priority`** *(number, optional)* — Higher numbers take precedence when exclusion rules create conflicts (default: 0)
- When a page matches multiple categories with conflicting `exclude_matchers`, the category with the highest priority is kept
- If priorities are equal, both categories are kept (no conflict resolution)

**Example with priority:**
```json
[
  {
    "name": "invoices",
    "description": "Invoice pages with line items and totals",
    "priority": 10
  },
  {
    "name": "receipts", 
    "description": "Payment receipts and transaction records",
    "priority": 5,
    "exclude_matchers": ["invoices"]
  },
  {
    "name": "other_financial",
    "description": "Any other financial documents",
    "priority": 1,
    "exclude_matchers": ["*"]
  }
]
```
---

### Example requests

```python
import json, requests

queries = [
    {"name": "cover_pages", "description": "Title pages or covers"},
    {"name": "data_tables", "description": "Pages with structured tables"},
    {"name": "appendices", "description": "Supplemental materials or references"}
]

resp = requests.post(
    "https://api.trycardinal.ai/split",
    headers={"Authorization": "Bearer YOUR_API_KEY"},
    files={"file": open("quarterly-report.pdf", "rb")},
    data={"queries": json.dumps(queries)}
)
print(resp.json())
```

### Example Response

```json
{
  "success": true,
  "pages": [
    {
      "content": "Page 1 content...",
      "page_number": 1
    },
    {
      "content": "Page 2 content...",
      "page_number": 2
    }
  ],
  "partitions": [
    {
      "name": "cover_pages",
      "description": "Title pages, cover sheets, or document headers",
      "pages": [1]
    },
    {
      "name": "data_tables", 
      "description": "Pages with structured data, tables, or numerical information",
      "pages": [3, 4, 7, 8]
    },
    {
      "name": "appendices",
      "description": "Supporting documents, references, or supplementary materials", 
      "pages": [9, 10, 11]
    }
  ]
}
```

### Response Format

The response includes:

- **`success`** - Boolean indicating if partitioning completed successfully
- **`pages`** - Array of page objects with content and metadata
- **`partitions`** - Array of partition results, each containing:
  - **`name`** - The partition name from your query
  - **`description`** - The partition description from your query  
  - **`pages`** - Array of page numbers that match this partition (sorted)

### Supported File Types

This endpoint supports:

- **PDF** files (.pdf)
- **Images** (.jpg, .jpeg, .png)


#### Writing Effective Queries

**Good query descriptions:**
- Be specific about content type: "Financial tables with revenue data"
- Include context clues: "Pages with signatures or sign-off sections"
- Mention visual indicators: "Charts, graphs, or data visualizations"

**Less effective queries:**
- Too vague: "Important pages"
- Overly restrictive: "Page 5 specifically about Q3 sales in the northeast region"

### Under the Hood

We run the document through our full Markdown pipeline first, converting it into a precise text representation. Only then do we split, ensuring the results are consistent and accurate.

---

## Extraction Endpoint

**POST** `https://api.trycardinal.ai/split/extract`  
**Content-Type:** `multipart/form-data`  
**Auth:** `X-API-KEY: <API_KEY>`

After classifying pages with `/split`, use `/split/extract` to download specific pages as a separate PDF.

### Required parameters

- **`pages`** *(string)* — JSON-encoded array of page numbers (e.g., `"[1, 3, 5, 7]"`)
- **`file`** *(file upload)* **OR** **`fileUrl`** *(string)*

### Example requests
```python
import json, requests

# First, get page classifications from /split
split_resp = requests.post(
    "https://api.trycardinal.ai/split",
    headers={"X-API-KEY": "YOUR_API_KEY"},
    files={"file": open("document.pdf", "rb")},
    data={"queries": json.dumps([
        {"name": "invoices", "description": "Invoice pages"}
    ])}
)

partitions = split_resp.json()["partitions"]
invoice_pages = next(p["pages"] for p in partitions if p["name"] == "invoices")

# Extract those pages as a new PDF
extract_resp = requests.post(
    "https://api.trycardinal.ai/split/extract",
    headers={"X-API-KEY": "YOUR_API_KEY"},
    files={"file": open("document.pdf", "rb")},
    data={
        "pages": json.dumps(invoice_pages),  # e.g., [1, 3, 5]
        "filename": "invoices.pdf"
    }
)

# Save the extracted PDF
with open("invoices.pdf", "wb") as f:
    f.write(extract_resp.content)
```

### Response Format

The `/split/extract` endpoint returns a PDF file directly.

- **Content-Type:** `application/pdf`
- **Content-Disposition:** `attachment; filename="<your-filename>.pdf"`

To save the extracted PDF, simply write the response body to a `.pdf` file.

### API Reference

<Card title="Split API" href="api-reference/endpoint/split" icon="code" />