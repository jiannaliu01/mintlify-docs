---
title: "Process File"
openapi: "POST /process"
---

# `/process`

Convert PDF pages (or images) into clean, structured **Markdown** with optional extras like barcodes, signatures, text blocks, and page images.

## Endpoint

```http
POST https://async-cardinal-api-382401401043.us-central1.run.app/process
```

Authentication

Include your API key in the header:

x-api-key: <YOUR_API_KEY>

Request

This endpoint expects multipart/form-data.

Exactly one of file or fileUrl is required.

Field	Type	Required	Default	Description
file	file (binary)	one-of	—	The PDF or image to upload.
fileUrl	string (URL)	one-of	—	HTTPS URL to a PDF/image. Cardinal will fetch and process it.
post_processing_on	boolean	optional	true	Apply post-processing (layout normalization, table cleanup, heuristics).
start_page	integer (1-based)	optional	1	First page to process.
ephemeral	boolean	optional	false	If true, results are not persisted to S3.
Example: cURL (upload a local file)
curl --location 'https://async-cardinal-api-382401401043.us-central1.run.app/process' \
  --header 'x-api-key: YOUR_API_KEY' \
  --form 'file=@"/path/to/document.pdf"' \
  --form 'post_processing_on=false' \
  --form 'start_page=1'

Example: cURL (process by URL)
curl --location 'https://async-cardinal-api-382401401043.us-central1.run.app/process' \
  --header 'x-api-key: YOUR_API_KEY' \
  --form 'fileUrl="https://example.com/invoice.pdf"' \
  --form 'post_processing_on=true' \
  --form 'ephemeral=true'

Example: JavaScript (fetch)
const form = new FormData();
// EITHER upload a file:
// form.append('file', fs.createReadStream('./document.pdf'));

// OR process by URL:
form.append('fileUrl', 'https://example.com/invoice.pdf');

form.append('post_processing_on', 'true');
form.append('start_page', '1');

const res = await fetch(
  'https://async-cardinal-api-382401401043.us-central1.run.app/process',
  {
    method: 'POST',
    headers: { 'x-api-key': process.env.CARDINAL_API_KEY },
    body: form,
  }
);

const data = await res.json();
console.log(data);

Example: Python (requests)
import requests

url = "https://async-cardinal-api-382401401043.us-central1.run.app/process"
headers = {"x-api-key": "YOUR_API_KEY"}

# Option A: upload a file
files = {"file": open("document.pdf", "rb")}
data = {"post_processing_on": "true", "start_page": "1", "ephemeral": "false"}
resp = requests.post(url, headers=headers, files=files, data=data)

# Option B: process by URL
data = {
    "fileUrl": "https://example.com/invoice.pdf",
    "post_processing_on": "true",
    "ephemeral": "true"
}
resp = requests.post(url, headers=headers, data=data)

print(resp.status_code)
print(resp.json())

Response

On success (200), you’ll receive a JSON object with per-page results. Markdown is in pages[i].content.

{
  "success": true,
  "total_pages": 2,
  "successful_pages": 2,
  "failed_pages": 0,
  "pages": [
    {
      "width": 612.0,
      "height": 792.0,
      "is_dense": false,
      "content": "ACME CORPORATION\nInvoice #INV-2024-001\n\nBill To:\nJohn Doe Industries\n123 Business Street\nCityville, ST 12345\n\nDate: 2024-03-15\nDue Date: 2024-04-15\nPO Number: PO-2024-567\n\nDescription                 Qty    Unit Price    Total\nWidget Assembly A-100        50      $25.00     $1,250.00\nService Fee                   1      $150.00      $150.00\n                                    Subtotal:   $1,400.00\n                                    Tax (8%):     $112.00\n                                    Total:      $1,512.00\n\nThank you for your business!\nACME CORPORATION",
      "html_code": "",
      "page_base64": "/9j/4AAQSkZJRgABAQEASABIAAD/…",
      "barcodes": [
        {
          "type": "CODE_128",
          "value": "ABC123456789",
          "bounding_box": { "x": 450, "y": 50, "width": 120, "height": 25 }
        }
      ],
      "signatures": [
        {
          "type": "handwritten",
          "confidence": 0.89,
          "bounding_box": { "x": 400, "y": 650, "width": 180, "height": 40 }
        }
      ],
      "text_blocks": [
        {
          "content": "ACME CORPORATION\nInvoice #INV-2024-001\n…",
          "bounding_box": { "x": 50, "y": 50, "width": 500, "height": 700 },
          "metadata": {
            "page_angle": 0.0234,
            "selection_marks_found": 3,
            "confidence": 0.97,
            "language": "en"
          }
        }
      ],
      "image_metadata": [
        {
          "image_id": "img_001",
          "format": "PNG",
          "size": { "width": 200, "height": 150 },
          "position": { "x": 100, "y": 200 },
          "bounding_box": {
            "original_coordinates": {
              "min_x": 0.8283, "min_y": 0.6686, "max_x": 3.9613, "max_y": 3.6462
            },
            "pixel_coordinates": {
              "top": 180, "left": 228, "right": 1208, "bottom": 1113
            }
          },
          "caption": "Fig. 3: Prompt Template.",
          "cropped_image_url": "s3-or-base64-url",
          "metadata": "metadata description of image"
        }
      ]
    },
    {
      "width": 612.0,
      "height": 792.0,
      "is_dense": false,
      "content": "TERMS AND CONDITIONS\n\n1. Payment is due within 30 days of invoice date.\n…\nPage 2 of 2",
      "html_code": "<!DOCTYPE html><html><head><title>Terms</title></head><body><h2>TERMS AND CONDITIONS</h2></body></html>",
      "image_url": "https://example-bucket.s3.amazonaws.com/documents/sample_doc_page2.png?expires=3600",
      "images": [],
      "json": {},
      "page_base64": "/9j/4AAQSkZJRgABAQEASABIAAD/…",
      "barcodes": [],
      "signatures": [],
      "text_blocks": [
        {
          "content": "TERMS AND CONDITIONS\n\n1. Payment is due within 30 days…",
          "bounding_box": { "x": 50, "y": 50, "width": 500, "height": 200 },
          "metadata": {
            "page_angle": 0.0,
            "selection_marks_found": 0,
            "confidence": 0.99,
            "language": "en"
          }
        }
      ]
    }
  ]
}
